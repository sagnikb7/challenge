{{>_navbar}}
<div class="container">
    <div class="mt-2">
        <h1>Welcome: {{role}}, {{username}}</h1>
        {{#if isTeacher}}
        <button onclick="createClassRoom()" class="btn btn-primary">Add classroom</button>
        {{/if}}
    </div>
</div>

<script>
    function createClassRoom() {
        fetch('/classrooms', {
            method: 'PUT'
        }).then(async response => {
            let r = await response.json();
            if (response.status == 201) {

                let id = r.id
                let msg = `Visit classroom : ${id}`;
                if (confirm(msg)) {
                    window.location.href = `/classrooms/${id}`
                }
            } else {
                alert(JSON.stringify(response.json()))
            }
        }).catch((e) => {
            console.error(e);
            alert("Error")
        })
    }

</script>